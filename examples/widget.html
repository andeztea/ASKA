<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Widget Events Example</title>
		
		<link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="../assets/css/font-awesome.min.css" />
		
		<!-- fonts -->
		<link rel="stylesheet" href="../assets/css/ace-fonts.css" />
		<link rel="stylesheet" href="../assets/css/ace.min.css" />
		<!--[if lte IE 8]>
		  <link rel="stylesheet" href="../assets/css/ace-ie.min.css" />
		<![endif]-->
	</head>

	<body>
	 <div class="main-container">
	   <div class="page-content">
	 
		<div class="row">
			<div class="col-xs-12 col-sm-8 col-sm-offset-2">
				<h3 class="header blue lighter">
					Widget Events
				</h3>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 col-sm-8 col-sm-offset-2">
				
				<div class="widget-box" id="my-widget-box">
					<div class="widget-header">
						<h5>Default Widget Box</h5>
						<div class="widget-toolbar">
							<a data-action="settings" href="#"><i class="icon-cog"></i></a>
							<a data-action="reload" href="#"><i class="icon-refresh"></i></a>
							<a data-action="collapse" href="#"><i class="icon-chevron-up"></i></a>
							<a data-action="close" href="#"><i class="icon-remove"></i></a>
						</div>
					</div>

					<div class="widget-body">
					 <div class="widget-main">
						<p class="alert alert-info">
							Nunc aliquam enim ut arcu aliquet adipiscing. Fusce dignissim volutpat justo non consectetur. Nulla fringilla eleifend consectetur.
						</p>
					 </div>
					</div>
				</div>
				<br />
				<textarea id="log-event" style="width:100%; height:300px;"></textarea>
				
			</div>
		</div>


	   </div>
	 </div>


		<!-- basic scripts -->
		<!--[if !IE]> -->
		<script type="text/javascript">
		 window.jQuery || document.write("<script src='../assets/js/jquery-2.0.3.min.js'>"+"<"+"/script>");
		</script>
		<!-- <![endif]-->
		<!--[if IE]>
		<script type="text/javascript">
		 window.jQuery || document.write("<script src='../assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
		</script>
		<![endif]-->
		
		<script src="../assets/js/bootstrap.min.js"></script>
		
		<!-- ace scripts -->
		<script src="../assets/js/ace.min.js"></script>
		
		<script type="text/javascript">
			jQuery(function($) {
				function log_event(txt) {
					var area = $('#log-event');
					area.val(area.val() + txt + "\n");
					area.get(0).scrollTop = area.get(0).scrollHeight;
				}
				$('#log-event').val('');
				
				$('#my-widget-box').on(
				{
					'hide.ace.widget' : function(e) {
						//e.preventDefault();//to prevent hiding
						log_event('\nhide.ace.widget called before being hidden');
					},
					'hidden.ace.widget' : function(e) {
						log_event('hidden.ace.widget called after widget is hidden');
					},
					
					'show.ace.widget' : function(e) {
						//e.preventDefault();//to prevent showing
						log_event('\nshow.ace.widget called before being shown');
					},
					'shown.ace.widget' : function(e) {
						log_event('shown.ace.widget called after widget is shown');
					},
					
					'close.ace.widget' : function(e) {
						//e.preventDefault();//to prevent closing
						log_event('\nclose.ace.widget called before being closed');
					},
					'closed.ace.widget' : function(e) {
						log_event('closed.ace.widget called almost when widget is closed');
					},
					
					'reload.ace.widget' : function(e) {
						//e.preventDefault();//to prevent reloading
						log_event('\nreload.ace.widget called before reloading widget');

						e.stopPropagation();//stop propagating to the event defined in ace.min.js which you should remove altogether

						var $box = $(this);
						setTimeout(function() {
							$box.trigger('reloaded.ace.widget');
						}, parseInt(Math.random() * 500 + 500));
		
					},
					'reloaded.ace.widget' : function(e) {
						log_event('reloaded.ace.widget called after reloading widget');
					},
					
					'settings.ace.widget' : function(e) {
						log_event('\nsettings.ace.widget called when settings button is clicked');
					}
				
				});
				
			});
		</script>

	</body>
</html>
